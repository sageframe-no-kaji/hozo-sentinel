{% extends "base.html" %}
{% block title %}Devices — Hōzō{% endblock %}
{% block content %}
<div class="flex items-center justify-between mb-6">
  <h1 class="text-2xl font-bold">Registered Devices</h1>
  <a href="/auth/register"
     class="btn-primary text-xs px-4 py-2 rounded text-white cursor-pointer">
    + Add Device
  </a>
</div>

{% if credentials %}
<div class="space-y-3">
  {% for cred in credentials %}
  <div class="card p-4 flex items-center justify-between">
    <div>
      <div class="font-medium text-sm">{{ cred.device_name }}</div>
      <div class="text-slate-500 text-xs mt-0.5">
        Added {{ cred.added_at[:10] }} &nbsp;·&nbsp;
        Sign count: {{ cred.sign_count }}
      </div>
      <div class="text-slate-600 text-xs font-mono mt-0.5 truncate max-w-xs">
        id: {{ cred.id[:20] }}…
      </div>
    </div>
    <form method="post" action="/auth/devices/{{ cred.id }}/delete"
          onsubmit="return confirm('Remove {{ cred.device_name }}? You won\'t be able to log in with it.')">
      <button type="submit"
              class="btn-danger text-xs px-3 py-1.5 rounded text-white cursor-pointer">
        Remove
      </button>
    </form>
  </div>
  {% endfor %}
</div>
{% else %}
<div class="card p-8 text-center text-slate-500">
  No devices registered.
  <a href="/auth/register" class="text-blue-400 underline">Register one now →</a>
</div>
{% endif %}

<div class="mt-8 card p-4 text-xs text-slate-500">
  <strong class="text-slate-400">Security note:</strong>
  Always keep at least 2 registered devices (e.g. laptop + YubiKey) so you
  can recover if one is lost. If you remove all devices, Hōzō enters bootstrap
  mode and anyone on the network can register a new device.
</div>
{% endblock %}
